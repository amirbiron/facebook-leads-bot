# 📦 Facebook Leads Finder Bot - סיכום פרויקט

## 🎯 מה נוצר?

מערכת מלאה לחיפוש אוטומטי של לידים מקבוצות פייסבוק ישראליות, עם התראות בזמן אמת לטלגרם.

## 📂 מבנה הפרויקט

```
facebook-leads-bot/
│
├── 📄 main.py                    # נקודת כניסה ראשית
│
├── 📁 config/                    # הגדרות
│   ├── __init__.py
│   └── config.py                 # ניהול משתני סביבה
│
├── 📁 models/                    # מודלים למסד נתונים
│   ├── __init__.py
│   └── database.py               # MongoDB models (Post, Group, Database)
│
├── 📁 services/                  # שירותים עיקריים
│   ├── __init__.py
│   ├── scraper.py                # Facebook scraper עם Selenium
│   ├── keywords.py               # מנגנון התאמת מילות מפתח
│   └── telegram_bot.py           # בוט טלגרם עם התראות
│
├── 📁 utils/                     # כלי עזר
│   ├── __init__.py
│   └── logger.py                 # מערכת logging
│
├── 📄 requirements.txt           # תלויות Python
├── 📄 Dockerfile                 # לפריסה ב-Render
├── 📄 render.yaml                # הגדרות Render
├── 📄 setup.sh                   # סקריפט התקנה מהיר
│
├── 📄 .env.example               # דוגמה למשתני סביבה
├── 📄 .gitignore                 # קבצים להתעלמות
│
├── 📘 README.md                  # תיעוד מלא
├── 📘 QUICK_START.md             # התחלה מהירה (5 דקות)
└── 📘 EXAMPLES.md                # דוגמאות ותרחישים
```

## 🔧 רכיבים טכניים

### 1. Facebook Scraper (`services/scraper.py`)

**תכונות:**
- ✅ Selenium + undetected-chromedriver
- ✅ התנהגות דמוית אדם (anti-detection)
- ✅ גלילה איטית ואקראית
- ✅ המתנות אקראיות בין פעולות
- ✅ בחירה אקראית של 1-2 קבוצות בכל ריצה
- ✅ חילוץ מידע מפוסטים

**מה הוא עושה:**
1. מתחבר לפייסבוק עם החשבון שהוגדר
2. נכנס לקבוצות שנבחרו
3. גולל ומחלץ פוסטים
4. מחזיר רשימת פוסטים לעיבוד

### 2. Keywords Matcher (`services/keywords.py`)

**תכונות:**
- ✅ התאמת מילות מפתח חיוביות/שליליות
- ✅ תמיכה בעברית ואנגלית
- ✅ OR logic למילות חיוביות
- ✅ Veto למילות שליליות

**מה הוא עושה:**
1. מקבל טקסט פוסט
2. בודק מילות מפתח חיוביות
3. בודק מילות מפתח שליליות
4. מחזיר האם הפוסט רלוונטי

### 3. Telegram Bot (`services/telegram_bot.py`)

**תכונות:**
- ✅ שליחת התראות מעוצבות
- ✅ כפתורי פעולה (פתח, שמור, לא רלוונטי)
- ✅ פקודות ניהול (/status, /groups, /keywords וכו')
- ✅ שליטה בניטור (/pause, /resume)
- ✅ טיפול ב-callbacks מכפתורים

**מה הוא עושה:**
1. מקבל פוסטים רלוונטיים
2. שולח התראה מעוצבת לטלגרם
3. מטפל בפקודות משתמש
4. מעדכן סטטוסים במסד נתונים

### 4. Database (`models/database.py`)

**תכונות:**
- ✅ MongoDB עם pymongo
- ✅ Singleton pattern לחיבור
- ✅ אינדקסים אוטומטיים
- ✅ מודלים: Post, Group

**מה הוא עושה:**
1. מנהל חיבור למונגו
2. שומר פוסטים עם מטא-דאטה
3. מעדכן סטטוסים
4. מספק סטטיסטיקות

### 5. Main Controller (`main.py`)

**תכונות:**
- ✅ APScheduler לריצות מחזוריות
- ✅ ניהול כל הרכיבים
- ✅ טיפול בשגיאות
- ✅ כיבוי מסודר

**מה הוא עושה:**
1. מפעיל את כל השירותים
2. מריץ סריקה כל X דקות
3. מתאם בין הרכיבים
4. מטפל ב-lifecycle

## 🚀 תהליך העבודה

```
┌─────────────────────────────────────┐
│  Scheduler (כל 45 דקות)            │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│  Facebook Scraper                   │
│  • התחברות לפייסבוק                │
│  • סריקת 1-2 קבוצות                │
│  • חילוץ פוסטים                    │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│  Keywords Matcher                   │
│  • בדיקת פוסט כבר קיים?            │
│  • בדיקת רלוונטיות                 │
│  • מילות מפתח +/-                  │
└──────────────┬──────────────────────┘
               │
               ▼ (אם רלוונטי)
┌─────────────────────────────────────┐
│  Database                           │
│  • שמירת פוסט חדש                  │
│  • סטטוס: "new"                    │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│  Telegram Bot                       │
│  • התראה מעוצבת                    │
│  • כפתורי פעולה                    │
└─────────────────────────────────────┘
```

## 🎨 תכונות מיוחדות

### Anti-Detection
- ✅ undetected-chromedriver
- ✅ User agent אמיתי
- ✅ המתנות אקראיות (2-8 שניות)
- ✅ גלילה איטית
- ✅ בחירה אקראית של קבוצות

### Telegram Rich Messages
```
🔥 פוסט חדש בפייסבוק!

👤 שם מחבר
📍 קבוצה: שם הקבוצה

💬 "תוכן הפוסט..."

⏰ פורסם: לפני X דקות

[🔗 פתח] [💾 שמור] [🗑 לא רלוונטי]
```

### MongoDB Schema
```javascript
{
  post_id: "unique_id",
  group_name: "שם קבוצה",
  author: "שם מחבר",
  text: "תוכן הפוסט",
  timestamp: ISODate(),
  discovered_at: ISODate(),
  status: "new|saved|contacted|not_relevant",
  post_url: "https://...",
  ...
}
```

## 🔐 אבטחה

### מה עשינו:
- ✅ חשבון פייסבוק נפרד (לא אישי)
- ✅ התנהגות human-like
- ✅ Rate limiting (45 דקות)
- ✅ בדיקה של 1-2 קבוצות בלבד בכל ריצה
- ✅ Headless mode ב-production
- ✅ משתני סביבה (לא hardcoded)

### מה חשוב לזכור:
- ⚠️ פייסבוק לא מעודד scraping
- ⚠️ שימוש באחריותך
- ⚠️ חשבון עלול להיחסם
- ⚠️ השתמש בחכמה

## 📊 קבצי הגדרה

### `.env` (חובה!)
```env
TELEGRAM_BOT_TOKEN=...
TELEGRAM_CHAT_ID=...
MONGODB_URI=...
FB_EMAIL=...
FB_PASSWORD=...
FB_GROUPS=url1,url2,url3
POSITIVE_KEYWORDS=...
NEGATIVE_KEYWORDS=...
```

### `render.yaml`
```yaml
services:
  - type: worker
    name: facebook-leads-bot
    env: docker
    plan: starter
```

## 🎯 מה אפשר לעשות עכשיו?

### ✅ המערכת מוכנה ל:
1. פריסה מיידית על Render
2. הפעלה מקומית לפיתוח
3. התאמה אישית למילות מפתח
4. הרחבה עם תכונות נוספות

### 🔧 שיפורים אפשריים:
- [ ] Dashboard Web מלא
- [ ] Scoring system לפוסטים
- [ ] ניהול Keywords דינמי דרך הבוט
- [ ] תמיכה ב-Instagram/LinkedIn
- [ ] API לאינטגרציה
- [ ] Webhook במקום polling

## 📚 מסמכים

### קריאה חובה:
1. **README.md** - תיעוד מלא ומפורט
2. **QUICK_START.md** - התחלה מהירה ב-5 דקות
3. **EXAMPLES.md** - דוגמאות ותרחישים

### הפעלה:
```bash
# התקנה
./setup.sh

# הפעלה מקומית
source venv/bin/activate
python main.py

# פריסה על Render
# ראה QUICK_START.md
```

## 🎉 סיכום

נוצרה מערכת מלאה ופועלת ל:
- ✅ סריקת פייסבוק אוטומטית
- ✅ זיהוי לידים רלוונטיים
- ✅ התראות טלגרם בזמן אמת
- ✅ ניהול במונגו
- ✅ פריסה קלה על Render

**המערכת מוכנה לשימוש! 🚀**

---

**נוצר על ידי Claude**  
**תאריך:** {{ now }}
